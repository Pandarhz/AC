<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Souvenirs des Écrins</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Font Awesome (pour les personnages) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&family=Orbitron:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #000000;
            --accent-color: #ff4500;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            background-color: #1a1a1a;
        }

        /* --- 1. INTRO ANIMATION (Marcheurs) --- */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeOutIntro 1s ease-out 4s forwards; /* Disparait après 4s */
            pointer-events: none;
        }

        .walkers-container {
            position: absolute;
            bottom: 40%;
            left: -20%; /* Départ à gauche hors écran */
            display: flex;
            gap: 20px;
            animation: walkAcross 4s linear forwards;
        }

        .walker {
            font-size: 3rem;
            color: white;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        /* Animation de sautillement pour simuler la marche */
        .walker i {
            animation: bounce 0.5s infinite alternate ease-in-out;
        }
        .walker:nth-child(2) i { animation-delay: 0.1s; }
        .walker:nth-child(3) i { animation-delay: 0.2s; }

        /* --- 2. DIAPORAMA (Overlay) --- */
        #slideshow-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 3000;
            display: none; /* Caché par défaut */
            align-items: center;
            justify-content: center;
        }

        #slideshow-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            animation: popIn 0.3s ease-out; /* Effet d'apparition sec */
        }

        /* --- 3. CARTE ET INTERFACE --- */
        #map {
            height: 100%;
            width: 100%;
            position: absolute;
            z-index: 1;
        }

        .ui-container {
            position: absolute;
            bottom: 50px;
            width: 100%;
            text-align: center;
            z-index: 1000;
            opacity: 0;
            /* Apparait après l'intro et le zoom (env 8s) */
            animation: fadeInUI 1s ease-out 8s forwards; 
            pointer-events: none; /* Pour cliquer au travers si besoin */
        }

        /* Bouton Noir */
        .start-btn {
            background-color: #000000;
            color: white;
            padding: 20px 40px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 800;
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            border: 2px solid white;
            pointer-events: auto;
            cursor: pointer;
            display: inline-block;
            transition: transform 0.1s;
        }
        
        .start-btn:active {
            transform: scale(0.95);
        }

        /* --- KEYFRAMES --- */
        @keyframes walkAcross {
            0% { left: -20%; }
            100% { left: 120%; } /* Sort à droite */
        }

        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        @keyframes fadeOutIntro {
            to { opacity: 0; visibility: hidden; }
        }

        @keyframes fadeInUI {
            to { opacity: 1; }
        }

        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

    </style>
</head>
<body>

    <!-- 1. Intro Animation -->
    <div id="intro-screen">
        <div class="walkers-container">
            <!-- 3 personnages -->
            <div class="walker"><i class="fa-solid fa-person-hiking"></i></div>
            <div class="walker"><i class="fa-solid fa-person-skiing"></i></div>
            <div class="walker"><i class="fa-solid fa-person-snowboarding"></i></div>
        </div>
    </div>

    <!-- 2. Diaporama Rapide -->
    <div id="slideshow-overlay">
        <img id="slideshow-img" src="" alt="Souvenir">
    </div>

    <!-- 3. Interface Bouton -->
    <div class="ui-container" id="ui-layer">
        <a class="start-btn" onclick="launchSlideshow()">Lancer l'exploration</a>
    </div>

    <!-- 4. Carte -->
    <div id="map"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // --- CONFIGURATION ---
        // Liste de tes photos (assure-toi qu'elles sont dans le dossier avec index.html)
        // Renomme tes photos 1.jpg, 2.jpg... pour faciliter la vie !
        // J'ai mis des placeholders Unsplash pour l'exemple, REMPLACE LES NOMS ci-dessous par tes fichiers.
        const myPhotos = [
            '1.jpg', '2.jpg', '3.jpg', '4.jpg', '5.jpg', 
            '6.jpg', '7.jpg', '8.jpg', '9.jpg', '10.jpg'
            // Ajoute autant de photos que tu veux ici
        ];

        // Si tu n'as pas encore mis tes photos locales, ce code utilise des images démo :
        const demoPhotos = [
           'https://images.unsplash.com/photo-1519681393784-d120267933ba',
           'https://images.unsplash.com/photo-1454496522488-7a8e488e8606',
           'https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99',
           'https://images.unsplash.com/photo-1551632811-561732d1e306',
           'https://images.unsplash.com/photo-1605542058732-22f35492d192'
        ];
        
        // IMPORTANT : Change cette variable sur 'true' quand tu as mis tes vraies photos
        const useLocalPhotos = false; 

        const photosToUse = useLocalPhotos ? myPhotos : demoPhotos;

        // Coordonnées Cibles (Lac Besson)
        const targetCoords = [44.9530, 6.0974]; 

        // 1. Initialisation Carte (Vue Espace - Zoom Lointain)
        const map = L.map('map', {
            center: [46.2276, 2.2137], // Centre de la France
            zoom: 5, // Vue de très haut
            zoomControl: false,
            attributionControl: false
        });

        // Fond de carte Topographique
        L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
            maxZoom: 17,
            attribution: 'OpenTopoMap'
        }).addTo(map);

        // 2. Gestion de l'arrivée (Zoom depuis l'espace)
        // L'intro dure 4s, on attend la fin pour lancer le zoom
        setTimeout(() => {
            map.flyTo(targetCoords, 14, {
                animate: true,
                duration: 4 // Le vol dure 4 secondes
            });
            
            // Une fois arrivé, on met un marqueur
            setTimeout(() => {
                L.marker(targetCoords).addTo(map)
                .bindPopup("<b>Notre Spot</b><br>Lac Besson").openPopup();
            }, 4500);

        }, 4000);

        // 3. Fonction Diaporama Rapide
        function launchSlideshow() {
            const ui = document.getElementById('ui-layer');
            const overlay = document.getElementById('slideshow-overlay');
            const imgElement = document.getElementById('slideshow-img');
            
            // Cacher le bouton
            ui.style.opacity = '0';
            
            // Afficher l'overlay
            overlay.style.display = 'flex';
            
            let index = 0;

            // Fonction pour changer d'image
            function showNextImage() {
                if (index >= photosToUse.length) {
                    // Fin du diaporama
                    endSlideshow();
                    return;
                }

                imgElement.src = photosToUse[index];
                
                // Effet de "reset" de l'animation pour chaque image
                imgElement.style.animation = 'none';
                imgElement.offsetHeight; /* trigger reflow */
                imgElement.style.animation = 'popIn 0.3s ease-out';

                index++;
                
                // Temps d'affichage par photo (800ms = 0.8 seconde)
                setTimeout(showNextImage, 800); 
            }

            // Lancer la première image
            showNextImage();
        }

        function endSlideshow() {
            const overlay = document.getElementById('slideshow-overlay');
            overlay.style.display = 'none';
            
            // Réactiver les contrôles de zoom pour l'utilisateur
            L.control.zoom({ position: 'bottomright' }).addTo(map);
        }

    </script>
</body>
</html>
